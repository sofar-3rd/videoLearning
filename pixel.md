# 音视频常见名词

## 码率

码率：视频播放每秒输出的数据大小；
帧率：每秒输出多少张图片；
分辨率：一张图片的像素大小，1920*1080的分辨率输出2073600像素；
$码率 = FPS(帧率) * 分辨率 $

## 像素和比特的关系?

1. 黑白图像：一像素用一位表示(0或1)；
2. 灰度图像：一像素用一比特(八位)表示(0-255)；
3. 彩色图像：RGB，每种原色用显示的位深度表示，若显示器的位深度为10位(0-1024)，则一像素为3*10(位)；

![alt text](/pixel.assets/位深度.png){:height="%60" width="60%"}

不同 RGB 编码格式的图片大小

![alt text](/pixel.assets/RGBimageSize.png)

## 视频像素数据

### RGB

RGB是红、绿、蓝三原色，任何颜色都可以通过这三原色按不同比例混合出来。但在科学研究一般不采用RGB颜色空间，因为它的细节难以进行数字化的调整。它将亮度、色调、饱和度三个量放在一起表示，很难分开。

### YUV

[参考](https://blog.csdn.net/www_dong/article/details/125686666?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522171369069216777224445170%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&request_id=171369069216777224445170&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-2-125686666-null-null.142^v100^pc_search_result_base5&utm_term=rgb%2Fyuv%E5%9B%BE%E5%83%8F%E6%95%B0%E6%8D%AE&spm=1018.2226.3001.4187)

在 YUV 空间中，每一个颜色有一个**亮度信号 Y**以及**两个色度信号 U 和 V**。

* Y:表示亮度（Luminance、Luma），占8bit（1字节）
* CB、CR：表示色度（Chrominance、Chroma）
  * Cb（U）：蓝色色度分量，占8bit（1字节）
  * Cr（V）：红色色度分量，占8bit（1字节）

![alt text](/pixel.assets/CbCr.png){:height="%60" width="60%"}

原始图像：

![alt text](/pixel.assets/originImage.png){:height="%60" width="60%"}

YUV分量：

![alt text](/pixel.assets/YUVimage.png)

* Y分量对呈现出清晰的图像有着很大的贡献；
* Cb、Cr分量的内容不太容易识别清楚。

YUV的发明处在彩色电视与黑白电视的过渡时期。

* YUV将亮度信息（Y）与色度信息（UV）分离，没有UV信息一样可以显示完整的图像，只不过是黑白的
* 这样的设计很好地解决了彩色电视与黑白电视的兼容性问题，使黑白电视也能够接收彩色电视信号，只不过它只显示了Y分量
* 彩色电视有Y、U、V分量，如果去掉UV分量，剩下的Y分量和黑白电视相同

#### YUV种类

常见YUV图像格式是由**采样格式** + **存储格式**共同决定的，如NV21、YV12、I420、YUY2等。

##### 存储格式

* **Planar平面格式**：指先连续存储所有像素点的 Y 分量，然后存储 U、V 分量。
* **Packed打包格式**：指每个像素点的 Y、U、V 分量是连续交替存储的。

![alt text](/pixel.assets/YUV存储格式.png){:height="%75" width="75%"}

I420（YU12）和 YV12 都是 YUV420P 类型即先存储 Y 分量，再存储 U、V 分量，区别在于：I420 是先 Y 再 U 后 V，而 YV12 是先 Y 再 V 后 U 。

![alt text](/pixel.assets/YUV420p存储结构.png){:height="%60" width="60%"}

NV21、NV12 属于 YUV420SP 类型（**IOS中有的类型**）。即先存储了 Y 分量，再UV 分量交替存储。区别在于：NV12 是 UV 交替，而 NV21 是 VU 交替。

![alt text](/pixel.assets/YUV420sp存储结构.png)

##### YUV采样格式

人眼对亮度(Y分量)的敏感度远远大于颜色(UV分量)的敏感度，所以丢弃某些UV分量，图像在肉眼中的感觉不会起太大的变化。

采样格式通常用A:B:C的形式来表示，比如 4:4:4、4:2:2、4:2:0，主流的采样方式有 YUV4:4:4，YUV4:2:2，YUV4:1:1，YUV4:2:0 。

* A：**一块 A*2 像素的概念区域，一般为 4**；
* B：**第1行的色度采样数目**；
* C：**第2行的色度采样数目**（C的值一般要么等于B，要么等于0）。

![alt text](/pixel.assets/色度二次采样.png)

###### YUV 4:4:4

YUV 三个信道的抽样率相同，每个像素点的三个分量信息完整，每个分量用8bit表示，一个像素点占用3个字节。

![alt text](/pixel.assets/YUV444.png){:height="%40" width="40%"}

Y:实心圆、U:空心圆 、V:交叉线

假如图像像素为：
[Y0 U0 V0]、[Y1 U1 V1]、[Y2 U2 V2]、[Y3 U3 V3]
那么采样的码流为：
Y0 U0 V0 Y1 U1 V1 Y2 U2 V2 Y3 U3 V3
最后映射出的像素点依旧为：
[Y0 U0 V0]、[Y1 U1 V1]、[Y2 U2 V2]、[Y3 U3 V3]

##### YUV 4:2:2

U、V 分量是 Y 分量的抽样率一半，每个像素点对应一个Y分量，水平方向每 2 个相邻像素点，抽取第一个像素点的 U 分量，抽取第二个像素点的 V 分量，则平均一个像素点占用 2 个字节。

![alt text](/pixel.assets/YUV422.png){:height="%40" width="40%"}

Y:实心圆、U:空心圆 、V:交叉线
假如图像像素为：
[Y0 U0 V0]、[Y1 U1 V1]、[Y2 U2 V2]、[Y3 U3 V3]
那么采样的码流为：
Y0 U0 Y1 V1 Y2 U2 Y3 V3
其中，每采样过一个像素点，都会采样其 Y 分量，而 U、V 分量就会间隔一个采集一个
最后映射出的像素点为
[Y0 U0 V1]、[Y1 U0 V1]、[Y2 U2 V3]、[Y3 U2 V3]

##### YUV 4:1:1

U、V分量是Y分量的抽样率 1/4，每个像素点对应一个 Y 分量，按行扫描，相邻两行中第一行每 2 个相邻像素点抽取第一个像素点的 U 分量，第二行每 2 个相邻像素点抽取第一个像素点的V分量，则平均一个像素点占用 1.5 个字节。

![alt text](/pixel.assets/YUV411.png){:height="%40" width="40%"}

Y:实心圆、U:空心圆 、V:交叉线
假如图像像素为：
[Y0 U0 V0]、[Y1 U1 V1]、[Y2 U2 V2]、[Y3 U3 V3]
那么采样的码流为：
Y0 U0 Y1 Y2 V2 Y3
最后映射出的像素点为 ：
[Y0 U0 V2]、 [Y1 U0 V2] 、[Y2 U0 V2]、 [Y3 U0 V2]

##### YUV 4:2:0

U、V 分量是 Y 分量的抽样率 1/4，每个像素点对应一个Y分量，按行扫描，相邻两行中第一行每 2 个相邻像素点抽取第一个像素点的 U 分量，第二行每 2 个相邻像素点抽取第一个像素点的 V 分量，则平均一个像素点占用 1.5 个字节。

![alt text](/pixel.assets/YUV420.png){:height="%40" width="40%"}

Y:实心圆、U:空心圆 、V:交叉线
假设图像像素为：
[Y0 U0 V0]、[Y1 U1 V1]、 [Y2 U2 V2]、 [Y3 U3 V3]
[Y4 U4 V4]、[Y5 U5 V5]、[Y6 U6 V6]、 [Y7 U7 V7]
那么采样的码流为：
Y0 U0 Y1 Y2 U2 Y3 Y4 V4 Y5 Y6 V6 Y7
其中，每采样过一个像素点，都会采样其 Y 分量，而 U、V 分量就会间隔一行按照 2 : 1 进行采样
最后映射出的像素点为：
[Y0 U0 V5]、[Y1 U0 V5]、[Y2 U2 V7]、[Y3 U2 V7]
[Y5 U0 V5]、[Y6 U0 V5]、[Y7 U2 V7]、[Y8 U2 V7]

